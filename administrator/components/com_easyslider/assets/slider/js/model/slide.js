void function(exports,$,_,Backbone){exports.JSNES_SlideData=Backbone.Model.extend({initialize:function(){var slide=this;this.items=this.get("items");this.lastDelayValue=this.get("transition").get("delay");this.listenTo(this.get("backgroundImage"),"change:url",function(){});this.get("transition").on("change:delay",function(model,value){if(slide.get("currentTime")>value)slide.set("currentTime",value,{silent:true});var lastValue=this.lastDelayValue||value;var delay=this.get("transition.delay");this.get("items").each(function(model){var inEnd=model.get("build").get("inEnd");var inStart=model.get("build").get("inStart");var outEnd=model.get("build").get("outEnd");var outStart=model.get("build").get("outStart");if(inStart>value){model.get("build").set({inEnd:value,inStart:value})}if(outEnd>value){var changedVaue=outEnd-value;model.get("build").set({outEnd:value,outStart:outStart-changedVaue})}if(outEnd==lastValue){var changedVaue=value-outEnd;model.get("build").set({outEnd:value,outStart:outStart+changedVaue})}});this.lastDelayValue=value},this)},getMinTime:function(){var items=this.get("items");var maxDuration=0;items.each(function(item){var duration=item.get("build.outDelay")+item.get("build.outDuration");if(duration>maxDuration)maxDuration=duration});return maxDuration},defaults:function(){return{active:false,index:0,currentTime:2500,backgroundColor:"#FFF",backgroundPosition:"50% 50%",backgroundSize:"cover",backgroundImage:{},transition:{},items:[]}},uploadBackground:function(file){var form=new FormData;var req=new XMLHttpRequest;var model=this;var slider_id=$('input[name="jform[slider_id]"]').val();var uploadURL=JSNES_CONFIG.URL.AJAX_UPLOAD_IMAGE+"&slider_id="+slider_id;form.append("file",file);req.open("POST",uploadURL,true);req.addEventListener("loadstart",function(e){model.trigger("upload:start");model.isUploadingBackground=true;model.uploadProgressPercent=0});req.upload.addEventListener("loadstart",function(e){});req.upload.addEventListener("progress",function(e){model.trigger("upload:progress");model.uploadProgressPercent=e.loaded/e.total*100});req.upload.addEventListener("loadend",function(e){model.uploadProgressPercent=100});req.addEventListener("loadend",function(e){var data=JSON.parse(req.responseText);if(typeof data!=="undefined"&&typeof data.status!=="undefined"&&data.status=="error"){var type="danger";data.message=typeof data.error?data.error:data.message;$.bootstrapGrowl(data.message,{type:type})}if(typeof data.image!=="undefined"&&typeof data.image.url!=="undefined"){model.isUploadingBackground=false;model.uploadProgressPercent=0;model.trigger("upload:complete");log(data.image);model.set("backgroundImage",data.image)}});req.send(form)},relations:{backgroundImage:JSNES_ImageData,transition:JSNES_SlideTransitionData,items:Backbone.Collection.extend({model:exports.JSNES_ItemData})}})}(this,JSNES_jQuery,JSNES_Underscore,JSNES_Backbone);