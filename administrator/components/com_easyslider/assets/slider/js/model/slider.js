void function(exports,$,_,Backbone){exports.JSNES_SliderData=Backbone.Model.extend({defaults:{version:1,fullWidth:false,fullHeight:false,width:null,canvasWidth:"800px",minWidth:null,maxWidth:null,height:null,canvasHeight:"400px",minHeight:null,maxHeight:null,tabletMode:false,tabletUnder:"1024px",tabletWidth:null,tabletHeight:null,mobileMode:false,mobileUnder:"768px",mobileWidth:null,mobileHeight:null,responsiveEditMode:"default",viewportOffsetX:0,viewportOffsetY:0,zoom:1,slides:[],fonts:[],settings:{}},initialize:function(data){this.on("change",this.setUsedFonts);this.on("change:width",this.triggerChangeSize);this.on("change:height",this.triggerChangeSize);this.on("change:canvasWidth",this.triggerChangeSize);this.on("change:tabletWidth",this.triggerChangeSize);this.on("change:mobileWidth",this.triggerChangeSize);this.on("change:canvasHeight",this.triggerChangeSize);this.on("change:tabletHeight",this.triggerChangeSize);this.on("change:mobileHeight",this.triggerChangeSize);this.on("change:mobileMode",this.onChangeResponsiveModeSetting);this.on("change:tabletMode",this.onChangeResponsiveModeSetting)},triggerChangeSize:function(){this.trigger("change:size")},onChangeResponsiveModeSetting:function(){if(this.get("responsiveEditMode")=="mobile"&&this.get("mobileMode")==false)this.set("responsiveEditMode","default");if(this.get("responsiveEditMode")=="tablet"&&this.get("tabletMode")==false)this.set("responsiveEditMode","default")},getWidth:function(){switch(this.get("responsiveEditMode")){case"default":case"desktop":return this.get("canvasWidth");break;case"tablet":return this.get("tabletWidth");break;case"mobile":return this.get("mobileWidth");break}},getHeight:function(){switch(this.get("responsiveEditMode")){case"default":case"desktop":return this.get("canvasHeight");break;case"tablet":return this.get("tabletHeight")||this.get("canvasHeight");break;case"mobile":return this.get("mobileHeight")||this.get("canvasHeight");break}},getOuterWidth:function(){switch(this.get("responsiveEditMode")){case"default":case"desktop":return this.get("width")||"auto";break;case"tablet":return this.get("tabletUnder")||this.get("canvasWidth")||this.get("width");break;case"mobile":return this.get("mobileUnder")||this.get("canvasWidth")||this.get("width");break}},setWidth:function(value){switch(this.get("responsiveEditMode")){case"default":case"desktop":this.set("canvasWidth",value);case"tablet":this.set("tabletWidth",value);case"mobile":this.set("mobileWidth",value)}this.trigger("change:size")},setHeight:function(value){switch(this.get("responsiveEditMode")){case"default":case"desktop":this.set("canvasHeight",value);case"tablet":this.set("tabletHeight",value);case"mobile":this.set("mobileHeight",value)}this.trigger("change:size")},setUsedFonts:function(){var fonts=[];this.get("slides").each(function(slide){slide.get("items").each(function(item){fonts.push(item.get("style.fontFamily"));fonts.push(item.get("style_T.fontFamily"));fonts.push(item.get("style_M.fontFamily"))})});this.set("fonts",_(fonts).compact(),{silent:true});return this},relations:{settings:Backbone.Model.extend({defaults:{fullWidth:false,fullHeight:false,showBtnNext:true,nextBtnLabel:"",showBtnPrev:true,showProgress:true,prevBtnLabel:"",showPagination:true,touchNavigation:true,loopSlider:true,startAt:1}}),slides:Backbone.Collection.extend({initialize:function(){this.on("change:index",this.sort)},model:JSNES_SlideData})}},{validate:function(data){return JSNES_DataConverter.convert(data)}});exports.JSNES_TextShadowsCollection=Backbone.Collection.extend({model:Backbone.Model.extend({defaults:{x:0,y:0,blur:0,color:"#000000"}})});exports.JSNES_BoxShadowsCollection=Backbone.Collection.extend({model:Backbone.Model.extend({defaults:{inset:" ",x:0,y:0,blur:0,color:"#000000"}})});exports.JSNES_FontsManager=Backbone.Collection.extend({model:Backbone.Model.extend({defaults:{name:"",loaded:false,system:false}}),loadFont:function(name){var font=this.findWhere({name:name});if(font&&!font.get("loaded")&&!font.get("system")){font.set("loaded",true);$("body").append("<link href='//fonts.googleapis.com/css?family="+font.get("name").replace(/\s+/g,"+")+"' rel='stylesheet' data-noprefix type='text/css'>")}}});exports.JSNES_FontsList=[{name:"Open Sans",group:"Sans Serif"},{name:"Roboto",group:"Sans Serif"},{name:"Lato",group:"Sans Serif"},{name:"Oswald",group:"Sans Serif"},{name:"Roboto Condensed",group:"Sans Serif"},{name:"Source Sans Pro",group:"Sans Serif"},{name:"PT Sans",group:"Sans Serif"},{name:"Droid Sans",group:"Sans Serif"},{name:"Raleway",group:"Sans Serif"},{name:"Montserrat",group:"Sans Serif"},{name:"Ubuntu",group:"Sans Serif"},{name:"PT Sans Narrow",group:"Sans Serif"},{name:"Arimo",group:"Sans Serif"},{name:"Titillium Web",group:"Sans Serif"},{name:"Dosis",group:"Sans Serif"},{name:"Oxygen",group:"Sans Serif"},{name:"Hind",group:"Sans Serif"},{name:"Muli",group:"Sans Serif"},{name:"Fira Sans",group:"Sans Serif"},{name:"Play",group:"Sans Serif"},{name:"Signika",group:"Sans Serif"},{name:"Merriweather Sans",group:"Sans Serif"},{name:"Josefin Sans",group:"Sans Serif"},{name:"Archivo Narrow",group:"Sans Serif"},{name:"Archivo Black",group:"Sans Serif"},{name:"Exo 2",group:"Sans Serif"},{name:"Asap",group:"Sans Serif"},{name:"Karla",group:"Sans Serif"},{name:"Orbitron",group:"Sans Serif"},{name:"Quicksand",group:"Sans Serif"},{name:"Exo",group:"Sans Serif"},{name:"Ropa Sans",group:"Sans Serif"},{name:"Cabin Condensed",group:"Sans Serif"},{name:"Hammersmith One",group:"Sans Serif"},{name:"Jura",group:"Sans Serif"},{name:"Russo One",group:"Sans Serif"},{name:"Rambla",group:"Sans Serif"},{name:"Chivo",group:"Sans Serif"},{name:"Viga",group:"Sans Serif"},{name:"Rajdhani",group:"Sans Serif"},{name:"Teko",group:"Sans Serif"},{name:"Cambay",group:"Sans Serif"},{name:"Sarpanch",group:"Sans Serif"},{name:"Poppins",group:"Sans Serif"},{name:"NTR",group:"Sans Serif"},{name:"Yantramanav",group:"Sans Serif"},{name:"Jaldi",group:"Sans Serif"},{name:"Pragati Narrow",group:"Sans Serif"},{name:"Lora",group:"Serif"},{name:"Droid Serif",group:"Serif"},{name:"Roboto Slab",group:"Serif"},{name:"Merriweather",group:"Serif"},{name:"Kadwa",group:"Serif"},{name:"Sumana",group:"Serif"},{name:"Martel",group:"Serif"},{name:"Suranna",group:"Serif"},{name:"Sree Krushnadevaraya",group:"Serif"},{name:"Rozha One",group:"Serif"},{name:"Vesper Libre",group:"Serif"},{name:"Almendra",group:"Serif"},{name:"Karma",group:"Serif"},{name:"Stoke",group:"Serif"},{name:"Inika",group:"Serif"},{name:"Slabo 13px",group:"Serif"},{name:"Rufina",group:"Serif"},{name:"Tienne",group:"Serif"},{name:"Podkova",group:"Serif"},{name:"Judson",group:"Serif"},{name:"Oranienbaum",group:"Serif"},{name:"Prata",group:"Serif"},{name:"Adamina",group:"Serif"},{name:"Arapey",group:"Serif"},{name:"Copse",group:"Serif"},{name:"Alice",group:"Serif"},{name:"Coustard",group:"Serif"},{name:"Neuton",group:"Serif"},{name:"Ultra",group:"Serif"},{name:"Glegoo",group:"Serif"},{name:"Cantata One",group:"Serif"},{name:"Vidaloka",group:"Serif"},{name:"Enriqueta",group:"Serif"},{name:"Playfair Display SC",group:"Serif"},{name:"Kreon",group:"Serif"},{name:"Old Standard TT",group:"Serif"},{name:"Josefin Slab",group:"Serif"},{name:"Sanchez",group:"Serif"},{name:"Noticia Text",group:"Serif"},{name:"Crete Round",group:"Serif"},{name:"Rokkitt",group:"Serif"},{name:"Bree Serif",group:"Serif"},{name:"Arvo",group:"Serif"},{name:"Playfair Display",group:"Serif"},{name:"Bitter",group:"Serif"},{name:"Lobster",group:"Display"},{name:"Abril Fatface",group:"Display"},{name:"Patua One",group:"Display"},{name:"Lobster Two",group:"Display"},{name:"Bangers",group:"Display"},{name:"Fredoka One",group:"Display"},{name:"Alfa Slab One",group:"Display"},{name:"Passion One",group:"Display"},{name:"Righteous",group:"Display"},{name:"Playball",group:"Display"},{name:"Fugaz One",group:"Display"},{name:"Squada One",group:"Display"},{name:"Bevan",group:"Display"},{name:"Oleo Script",group:"Display"},{name:"Contrail One",group:"Display"},{name:"Monoton",group:"Display"},{name:"Sansita One",group:"Display"},{name:"Ceviche One",group:"Display"},{name:"Unica One",group:"Display"},{name:"Seaweed Script",group:"Display"},{name:"Kelly Slab",group:"Display"},{name:"Yeseva One",group:"Display"},{name:"Oleo Script Swash Caps",group:"Display"},{name:"Graduate",group:"Display"},{name:"Trade Winds",group:"Display"},{name:"Medula One",group:"Display"},{name:"Sancreek",group:"Display"},{name:"Rye",group:"Display"},{name:"Geostar Fill",group:"Display"},{name:"Geostar",group:"Display"},{name:"Ewert",group:"Display"},{name:"Metal Mania",group:"Display"},{name:"Faster One",group:"Display"},{name:"Ranga",group:"Display"},{name:"Romanesco",group:"Hand-writing"},{name:"Mrs Saint Delafield",group:"Hand-writing"},{name:"Aguafina Script",group:"Hand-writing"},{name:"Herr Von Muellerhoff",group:"Hand-writing"},{name:"Yesteryear",group:"Hand-writing"},{name:"Yellowtail",group:"Hand-writing"},{name:"Grand Hotel",group:"Hand-writing"},{name:"Allura",group:"Hand-writing"},{name:"Nothing You Could Do",group:"Hand-writing"},{name:"Great Vibes",group:"Hand-writing"},{name:"Kaushan Script",group:"Hand-writing"},{name:"Roboto Mono",group:"Monospace"},{name:"Cutive Mono",group:"Monospace"},{name:"PT Mono",group:"Monospace"},{name:"Ubuntu Mono",group:"Monospace"},{name:"Source Code Pro",group:"Monospace"},{name:"Inconsolata",group:"Monospace"}];exports.JSNES_DataConverter={convert:function convertData(data){if(!data)return{};if(data.version!==undefined)return data;var data=_.clone(data);data.slides=_(data.slides||[]).map(function(slide){slide.items=_(slide.items||[]).map(function(item){var inAnimation=this.oldAnimations[item.build.inEffect]||{};var outAnimation=this.oldAnimations[item.build.outEffect]||{};var inTransform=_.pick(inAnimation,"translate","rotate","scale","skew");var outTransform=_.pick(outAnimation,"translate","rotate","scale","skew");var build={inEffect:item.build.inEffect,inStart:item.build.inStart,inEnd:item.build.inEnd,inEasing:"easeOut"+(inAnimation.easing||"Quad"),inTransform:_.extend(inTransform,{opacity:item.build.inFade?"0":"1"}),outEffect:item.build.outEffect,outStart:item.build.outStart,outEnd:item.build.outEnd,outEasing:"easeIn"+(outAnimation.easing||"Quad"),outTransform:_.extend(outTransform,{opacity:item.build.outFade?"0":"1"})};_.extend(build.inTransform,inTransform);_.extend(build.outTransform,outTransform);item.build=build;_(["width","height","top","left"]).each(function(key){typeof item.style[key]!="number"||(item.style[key]=Math.round(item.style[key])+"px")});if(item.type=="image"){item.image.original={width:item.style.width,height:item.style.height}}return item},this);return slide},this);return data},oldAnimations:{bounce:{easing:"Elastic",scale:{x:.5,y:.5}},"bounce-top":{easing:"Elastic",translate:{y:-200}},"bounce-bottom":{easing:"Elastic",translate:{y:200}},"bounce-left":{easing:"Elastic",translate:{x:-200}},"bounce-right":{easing:"Elastic",translate:{x:200}},"slide-left":{translate:{x:-100}},"slide-left-big":{translate:{x:-2e3}},"slide-left-small":{translate:{x:-50}},"slide-right":{translate:{x:100}},"slide-right-big":{translate:{x:2e3}},"slide-right-small":{translate:{x:50}},"slide-top":{translate:{y:-100}},"slide-top-big":{translate:{y:-2e3}},"slide-top-small":{translate:{y:-50}},"slide-bottom":{translate:{y:100}},"slide-bottom-big":{translate:{y:2e3}},"slide-bottom-small":{translate:{y:50}},"flip-left":{rotate:{y:-90}},"flip-right":{rotate:{y:90}},"flip-top":{rotate:{x:90}},"flip-bottom":{rotate:{x:-90}},"rotate-left-180":{rotate:{z:180}},"rotate-left-90":{rotate:{z:90}},"rotate-left-45":{rotate:{z:45}},"rotate-left-30":{rotate:{z:30}},"rotate-right-180":{rotate:{z:-180}},"rotate-right-90":{rotate:{z:-90}},"rotate-right-45":{rotate:{z:-45}},"rotate-right-30":{rotate:{z:-30}},"scale-up":{scale:{x:0,y:0}},"scale-up-X":{scale:{x:0,y:1}},"scale-up-Y":{scale:{x:1,y:0}},"scale-down":{scale:{x:2,y:2}},"scale-down-X":{scale:{x:2,y:1}},"scale-down-Y":{scale:{x:1,y:2}}}}}(this,JSNES_jQuery,JSNES_Underscore,JSNES_Backbone);