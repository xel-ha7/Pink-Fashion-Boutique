void function(exports,$,_,Backbone){exports.JSNES_SlideInspectorView=JSNES_InspectorView.extend({constructor:function JSNES_SlideInspectorView(){JSNES_InspectorView.apply(this,arguments)},events:_(JSNES_InspectorView.prototype.events).extend({"change .slide-duration-input":"changeSlideDuration","change .bg-position-x-input":"saveBgPositionData","change .bg-position-y-input":"saveBgPositionData","change .transition-type-select":"toggleTransitionConfigComponents","change #slide-transition *":"checkTransitionConflict","change #slide-transition input":"previewTransition","change #slide-transition select":"previewTransition","click .transition-preview-wrapper":"previewTransition"}),initialize:function(){Object.defineProperty(this,"target",{get:function(){return this.targets[0]}})},ready:function(){this.ensureInputInitialized();this.renderEffectSelectContent();this.$(".bg-pos-x-slider,.bg-pos-y-slider").slider({min:0,max:100,step:5});this.transitionPreviewView=new JSNEasySlider_TransitionView;this.transitionPreviewView.$el.appendTo(this.$(".transition-preview-wrapper"));this.transitionPreviewView.$fromEl=this.$(".slide-sample-from");this.transitionPreviewView.$toEl=this.$(".slide-sample-to");this.$(".ui-slider").each(function(){this.slide=null});this.$(".ui-slider").slider()},inspect:function(model){log("Inspector :: inspect slide");if(this._frozen)return;if(_.findWhere(this.targets,{cid:model.cid}))return model;this.superView.itemInspectorView.release();this.release();this.targets.push(model);this.listenTo(model,"change",this.debounceUpdateData);this.listenTo(model,"remove",this.release);this.listenTo(model,"upload:start",this.uploadShow);this.listenTo(model,"upload:progress",this.uploadProgress);this.listenTo(model,"upload:complete",this.uploadHide);this.superView.itemInspectorView.$el.addClass("hidden");this.$el.removeClass("hidden");this.debounceUpdateData();return model},renderEffectSelectContent:function(){var view=this;var slide_transitions=JSNES_TRANSITIONS;_.each(slide_transitions,function(transitions,group){view.$(".transition-name-select").each(function(){var $group=$("<optgroup>").attr("label",group).appendTo(this);_(transitions).each(function(transition,name){$group.append("<option>"+name+"</option>")})})})},updateData:_.compose(JSNES_InspectorView.prototype.updateData,function(){if(!this.targets.length)return;var model=this.targets[0];if(model.get("backgroundImage.url")){this.$(".background-image-setting").removeClass("hidden");var bgX,bgY;var positionRegex=/^(.*)\s(.*)$/;var bgPosition=model.get("backgroundPosition");var bgPositionMatch=bgPosition.match(positionRegex);if(!bgPositionMatch){bgX=50;bgY=50}else{bgX=bgPositionMatch[1];bgY=bgPositionMatch[2]}this.$(".bg-position-x-input").val(bgX);this.$(".bg-position-y-input").val(bgY)}else{this.$(".background-image-setting").addClass("hidden")}model.isUploadingBackground?this.uploadShow():this.uploadHide();this.delay(this.toggleTransitionConfigComponents)}),uploadShow:function(){this.$(".upload-button-container").addClass("hidden");this.$(".upload-progress-container").removeClass("hidden");this.$(".upload-progress .progress-bar").css({width:"0%"})},uploadProgress:function(){this.$(".upload-progress .progress-bar").css({width:Math.round(this.target.uploadProgressPercent)+"%"})},uploadHide:function(){this.$(".upload-progress-container").addClass("hidden");this.$(".upload-button-container").removeClass("hidden")},saveBgPositionData:function(){var bgX=this.$(".bg-position-x-input").val();var bgY=this.$(".bg-position-y-input").val();this.target.set("backgroundPosition",bgX.replace(/\s+/,"")+" "+bgY.replace(/\s+/,""))},changeSlideDuration:function(e){var value=parseInt(e.currentTarget.value);var minDuration=this.target.getMinTime();if(value<minDuration){alert("Duration can not be less than \n\n"+minDuration+"ms")}else{this.target.set("duration",value)}},toggleTransitionConfigComponents:function(){var value=this.$('[data-bind="transition.type"]').val();this.$(".transition-config").hide();switch(parseInt(value)){case 1:this.$("[basic-transition-config]").show();break;case 2:this.$("[complex-transition-config]").show();break;case 3:this.$("[cube-transition-config]").show();break}},checkTransitionConflict:function(){var cubeFace=this.$(".cube-face-select").val();var cubeAxis=this.$(".cube-axis-select").val();if((cubeFace=="left"||cubeFace=="right")&&cubeAxis=="x"){this.$(".cube-axis-select").val("y").trigger("change")}if((cubeFace=="top"||cubeFace=="bottom")&&cubeAxis=="y"){this.$(".cube-axis-select").val("x").trigger("change")}},previewTransition:function(){var transition=this.target.get("transition").toJSON();var previewView=this.transitionPreviewView;previewView.play(previewView.$fromEl,previewView.$toEl,transition)}})}(this,JSNES_jQuery,JSNES_Underscore,JSNES_Backbone);